<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DELTARUNE</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="fav.ico" />

  <style>
    a:visited {
      color: yellow;
    }

    a:hover {
      color: rgba(255, 255, 0, 0.75);
    }

    a:active {
      color: yellow;
    }
  </style>
</head>

<body>
  <div class="container">
    <img src="deltarune_logo.png" alt="DELTARUNE Logo" class="logo" />
    <p class="desc">Choose your chapter.</p>

    <div class="button-group">
      <button class="button" id="toggleChaptersBtn">Chapters</button>

      <!-- keep "hidden" here, JS will remove it when showing -->
      <div id="chapterButtons" class="chapter-buttons hidden">
        <button onclick="loadChapter(1)" class="button">Chapter 1</button>
        <button onclick="loadChapter(2)" class="button">Chapter 2</button>
        <button onclick="loadChapter(3)" class="button">Chapter 3</button>
        <button onclick="loadChapter(4)" class="button">Chapter 4</button>
      </div>
    </div>

    <!-- hidden by default so no bar until a chapter loads -->
    <div id="gameFrame" class="game-frame hidden"></div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const toggleChaptersBtn = document.getElementById('toggleChaptersBtn');
      const chapterButtons = document.getElementById('chapterButtons');
      const gameFrame = document.getElementById('gameFrame');

      // Toggle chapters list
      toggleChaptersBtn.addEventListener('click', () => {
        const isShowing = chapterButtons.classList.toggle('show');

        // when we first show it, remove "hidden" so display isn't stuck at none
        if (isShowing) {
          chapterButtons.classList.remove('hidden');
        }
      });

      // Make loadChapter usable from inline onclick
      window.loadChapter = function (num) {
        // reveal the game frame
        gameFrame.classList.remove('hidden');

        const chapterUrl = `https://tinklehost.github.io/deltarune/chapter${num}`;

        gameFrame.innerHTML = `
          <iframe src="${chapterUrl}" allowfullscreen></iframe>
        `;
      };
    });
  </script>

</body>

</html>
