<!doctype html>
<html lang="en">

<head>
    <script>
  if (
    location.hostname === "tinklehost.github.io" &&
    location.pathname.startsWith("/room")
  ) {
    location.replace(
      "/dj3d.io" + location.pathname
    );
  }
</script>
    <script>
  const OLD_BASE = 'https://tinklehost.github.io/';
  const NEW_BASE = 'https://tinklehost.github.io/dj3d.io/';

  // ---- 1. Intercept fetch requests ----
  const originalFetch = window.fetch;
  window.fetch = async function(input, init) {
    if (typeof input === 'string' && input.startsWith(OLD_BASE) && !input.startsWith(NEW_BASE)) {
      input = input.replace(OLD_BASE, NEW_BASE);
      console.log('Redirecting fetch to:', input);
    }
    return originalFetch(input, init);
  };

  // ---- 2. Intercept XHR requests ----
  const originalOpen = XMLHttpRequest.prototype.open;
  XMLHttpRequest.prototype.open = function(method, url, async, user, password) {
    if (typeof url === 'string' && url.startsWith(OLD_BASE) && !url.startsWith(NEW_BASE)) {
      url = url.replace(OLD_BASE, NEW_BASE);
      console.log('Redirecting XHR to:', url);
    }
    return originalOpen.call(this, method, url, async, user, password);
  };

  // ---- 3. Redirect static DOM elements ----
  function redirectDOMAssets() {
    const elements = [
      ...document.querySelectorAll('img, video, audio, script[type="module"], link[rel="stylesheet"], link[rel="modulepreload"]')
    ];

    elements.forEach(el => {
      const attrs = ['src', 'href'];
      attrs.forEach(attr => {
        if (el[attr] && el[attr].startsWith(OLD_BASE) && !el[attr].startsWith(NEW_BASE)) {
          el[attr] = el[attr].replace(OLD_BASE, NEW_BASE);
          console.log('Redirected element:', el[attr]);
        }
      });

      // Redirect <source> tags inside media
      if (el.querySelectorAll) {
        el.querySelectorAll('source').forEach(source => {
          if (source.src && source.src.startsWith(OLD_BASE) && !source.src.startsWith(NEW_BASE)) {
            source.src = source.src.replace(OLD_BASE, NEW_BASE);
            console.log('Redirected media source:', source.src);
          }
        });
      }
    });
  }

  // Run immediately
  redirectDOMAssets();

  // Observe dynamically added elements
  const observer = new MutationObserver(() => redirectDOMAssets());
  observer.observe(document.documentElement, { childList: true, subtree: true });
</script>
    <meta charset="utf-8" />
    <link rel="icon" href="favicon.ico" />
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Watch Youtube in a 3D room with friends." />
    <meta name="description" content="DJ your own 3D world" />
    <meta property="og:title" content="DJ3D.io" />
    <meta property="og:url" content="https://dj3d.io" />
    <meta property="og:image" content="https://dj3d.io/images/dj3d_banner.png" />
    <link rel="apple-touch-icon" href="logo192.png" />
    <link rel="manifest" href="manifest.json" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <script data-ad-client="ca-pub-5287217718410160" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script src="https://embed.twitch.tv/embed/v1.js"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-110992296-7"></script>
    <script>
        function gtag() {
            dataLayer.push(arguments)
        }
        window.dataLayer = window.dataLayer || [], gtag("js", new Date), gtag("config", "UA-110992296-7")
    </script>
    <script type="module">
        console.log("test module");
        import {
            joinRoom
        } from "trystero-torrent.min.js";
        console.log(joinRoom), window.joinRoom = joinRoom
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet" />
    <title>DJ3D - Watch Youtube with friends</title>
    <link href="static/css/2.9355b751.chunk.css" rel="stylesheet">
    <link href="static/css/main.d761a6ec.chunk.css" rel="stylesheet">
</head>

<body><noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <script>
        ! function(e) {
            function t(t) {
                for (var n, l, i = t[0], f = t[1], a = t[2], p = 0, s = []; p < i.length; p++) l = i[p], Object.prototype.hasOwnProperty.call(o, l) && o[l] && s.push(o[l][0]), o[l] = 0;
                for (n in f) Object.prototype.hasOwnProperty.call(f, n) && (e[n] = f[n]);
                for (c && c(t); s.length;) s.shift()();
                return u.push.apply(u, a || []), r()
            }

            function r() {
                for (var e, t = 0; t < u.length; t++) {
                    for (var r = u[t], n = !0, i = 1; i < r.length; i++) {
                        var f = r[i];
                        0 !== o[f] && (n = !1)
                    }
                    n && (u.splice(t--, 1), e = l(l.s = r[0]))
                }
                return e
            }
            var n = {},
                o = {
                    1: 0
                },
                u = [];

            function l(t) {
                if (n[t]) return n[t].exports;
                var r = n[t] = {
                    i: t,
                    l: !1,
                    exports: {}
                };
                return e[t].call(r.exports, r, r.exports, l), r.l = !0, r.exports
            }
            l.m = e, l.c = n, l.d = function(e, t, r) {
                l.o(e, t) || Object.defineProperty(e, t, {
                    enumerable: !0,
                    get: r
                })
            }, l.r = function(e) {
                "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
                    value: "Module"
                }), Object.defineProperty(e, "__esModule", {
                    value: !0
                })
            }, l.t = function(e, t) {
                if (1 & t && (e = l(e)), 8 & t) return e;
                if (4 & t && "object" == typeof e && e && e.__esModule) return e;
                var r = Object.create(null);
                if (l.r(r), Object.defineProperty(r, "default", {
                        enumerable: !0,
                        value: e
                    }), 2 & t && "string" != typeof e)
                    for (var n in e) l.d(r, n, function(t) {
                        return e[t]
                    }.bind(null, n));
                return r
            }, l.n = function(e) {
                var t = e && e.__esModule ? function() {
                    return e.default
                } : function() {
                    return e
                };
                return l.d(t, "a", t), t
            }, l.o = function(e, t) {
                return Object.prototype.hasOwnProperty.call(e, t)
            }, l.p = "/";
            var i = this.webpackJsonpclient = this.webpackJsonpclient || [],
                f = i.push.bind(i);
            i.push = t, i = i.slice();
            for (var a = 0; a < i.length; a++) t(i[a]);
            var c = f;
            r()
        }([])
    </script>
    <script src="static/js/2.561ca787.chunk.js"></script>
    <script src="static/js/main.0404d3d4.chunk.js"></script>
</body>

</html>
