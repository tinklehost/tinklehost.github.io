<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="25030706/theme/game.css">
  <meta name="robots" content="noindex, nofollow">
  <title>Escape Road City 2</title>
  <meta name="description"
    content="Break out into some awesome driving action with Escape Road 2 and unleash your passion for crazy crashes! Make the virtual city more chaotic than ever!" />

  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">

  <style type="text/css">
    .jss1:before {
      top: 0;
      width: 100%;
      filter: blur(16px);
      height: 100%;
      content: "";
      display: block;
      opacity: .5;
      z-index: 0;
      position: absolute;
      background-size: cover;
      background-image: url("25030706/loading.png")
    }

    /* keep your background */
    html,
    body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      background: #231F20;
    }

    /* Unity container */
    #unity-container {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      display: none;
    }

    #unity-canvas {
      width: 100%;
      height: 100%;
      display: block;
    }

    /* Hide game's original loader block (we use Tinkle loader instead) */
    #loadingBlock {
      display: none !important;
    }

    /* --- Tinkle-style loader overlay (same one as before) --- */
    #loader-overlay {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at top left, #414750 0, #1a1b20 55%, #111319 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      color: #fff;
      font-family: "Orbitron", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    .loader-card {
      background: radial-gradient(circle at top left, #414750 0, #1a1b20 55%, #111319 100%);
      padding: 24px 28px;
      border-radius: 18px;
      box-shadow:
        0 0 20px rgba(0, 0, 0, 0.8),
        0 0 32px rgba(211, 165, 16, 0.35);
      border: 1px solid rgba(211, 165, 16, 0.6);
      max-width: 420px;
      width: 90%;
      text-align: center;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .loader-logo {
      font-size: 15px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      margin-bottom: 4px;
      background: linear-gradient(90deg, #d3a410, #b7870f, #ffe4a1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      filter: drop-shadow(0 0 6px rgba(211, 165, 16, 0.45));
      white-space: nowrap;
    }

    .loader-title {
      font-size: 18px;
      margin-bottom: 6px;
      opacity: 0.95;
      color: #f5f5f5;
    }

    .loader-bar-outer {
      width: 100%;
      height: 10px;
      border-radius: 999px;
      background: #262831;
      overflow: hidden;
      box-shadow:
        inset 0 0 0 1px rgba(255, 255, 255, 0.08),
        0 0 18px rgba(211, 165, 16, 0.35);
      margin-bottom: 8px;
    }

    .loader-bar-inner {
      width: 0%;
      height: 100%;
      border-radius: inherit;
      background-image: linear-gradient(90deg, #6e5210, #d3a410, #ffe4a1);
      box-shadow: 0 0 16px rgba(255, 228, 161, 0.75);
      transition: width 0.1s ease-out;
    }

    .loader-info {
      font-size: 12px;
      color: #f5f5f5;
      opacity: 0.9;
    }

    .loader-hint {
      font-size: 11px;
      opacity: 0.8;
      color: #ffd27f;
    }

    /* --- Tinkle Intro overlay (same one as before) --- */
    #intro-overlay {
      position: fixed;
      inset: 0;
      background-color: #414141;
      display: none;
      align-items: center;
      justify-content: center;
      text-align: center;
      z-index: 900;
      color: #fff;
      font-family: "Orbitron", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      transition: opacity 0.7s ease, visibility 0.7s ease;
    }

    #intro-overlay.fade-out {
      opacity: 0;
      visibility: hidden;
    }

    .intro-card {
      padding: 32px 40px;
      background: rgba(17, 19, 25, 0.92);
      border-radius: 24px;
      box-shadow:
        0 0 20px rgba(0, 0, 0, 0.8),
        0 0 32px rgba(211, 165, 16, 0.35);
      border: 1px solid rgba(211, 165, 16, 0.6);
      max-width: 480px;
      width: 90%;
      position: relative;
    }

    .intro-brand {
      font-size: 14px;
      letter-spacing: 0.26em;
      text-transform: uppercase;
      margin-bottom: 6px;
      background: linear-gradient(90deg, #d3a410, #b7870f, #ffe4a1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      filter: drop-shadow(0 0 6px rgba(211, 165, 16, 0.45));
    }

    .intro-title {
      font-size: 32px;
      margin-bottom: 8px;
      color: #fef9e7;
      text-shadow: 0 0 10px rgba(0, 0, 0, 0.7);
    }

    .intro-sub {
      font-size: 13px;
      opacity: 0.85;
      margin-bottom: 22px;
      color: #f5f5f5;
    }

    .intro-cta {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 22px;
      border-radius: 999px;
      border: 1px solid rgba(211, 165, 16, 0.9);
      background: radial-gradient(circle at 0 0, rgba(211, 165, 16, 0.3), rgba(15, 23, 42, 0.9));
      cursor: pointer;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      user-select: none;
    }

    .intro-cta-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #8ee38e;
      box-shadow: 0 0 10px rgba(142, 227, 142, 0.9);
    }

    .intro-hint {
      margin-top: 12px;
      font-size: 11px;
      opacity: 0.7;
      color: #ffd27f;
    }
  </style>

  <script>
    var buildUrl = "Build";
    var versionFolder = "25030706/";
    buildUrl = "" + versionFolder + buildUrl;
    var loaderUrl = buildUrl + "/escape-road-city-2-v25030706.loader.js";
    var config = {
      dataUrl: buildUrl + "/escape-road-city-2-v25030706.data.unityweb",
      frameworkUrl: buildUrl + "/escape-road-city-2-v25030706.framework.js.unityweb",
      codeUrl: buildUrl + "/escape-road-city-2-v25030706.wasm.unityweb",
      streamingAssetsUrl: versionFolder + "StreamingAssets",
      companyName: "1games.io",
      productName: "Escape Road City 2",
      productVersion: "25030706",
      pubId: ""
    };
    config.hostindex = 2;
    config.gameId = "escape-road";
    config.eventLog = true;
    config.buildAPI = "https://event.azgame.io/apiaz/event";
    let currentDate = new Date();
    let endLogDate = new Date("2025-02-09T12:49:23.136Z");
    if (currentDate > endLogDate) {
      config.eventLog = false;
    }
    config.enableMoreGame = "yes";
    config.enablePromotion = true;
    config.gdHost = isHostOnGD();
    if (config.gdHost) {
      config.enableMoreGame = "no";
      config.enablePromotion = false;
      config.eventLog = false;
      let pathSegments = window.location.pathname.split('/');
      config.gdGameId = pathSegments[1];
    }
    function isHostOnGD() {
      let domainParts = window.location.hostname.split('.');
      let mainDomain = domainParts.slice(-2).join('.');
      return (mainDomain == "gamedistribution.com");
    }
  </script>

  <script id="gmsoft-jssdk" src="lib/gmsoftsdk_v5.js"></script>
</head>

<body>
  <!-- Tinkle Loader -->
  <div id="loader-overlay">
    <div class="loader-card">
      <div class="loader-logo">TINKLE LOADER</div>
      <div class="loader-title">Loading Escape Road City 2…</div>
      <div class="loader-bar-outer">
        <div class="loader-bar-inner" id="loader-bar-fill"></div>
      </div>
      <div class="loader-info" id="loader-info">Starting engine…</div>
      <div class="loader-hint">First load can take a while.</div>
    </div>
  </div>

  <!-- Tinkle Intro -->
  <div id="intro-overlay">
    <div class="intro-card">
      <div class="intro-brand">TINKLE GAMES</div>
      <div class="intro-title">Escape Road City 2</div>
      <div class="intro-sub">
        Click continue, then make sure the tab is focused and your sound is on.
      </div>
      <div class="intro-cta" id="intro-cta">
        <span class="intro-cta-dot"></span>
        <span>Click to continue</span>
      </div>
      <div class="intro-hint">
        If it looks stuck at 90%+, it’s usually Unity initializing.
      </div>
    </div>
  </div>

  <!-- Unity -->
  <div id="unity-container" style="display: none;">
    <canvas id="unity-canvas"></canvas>
  </div>

  <!-- Original loader kept but hidden -->
  <div id="loadingBlock">
    <div class="jss31 jss34 jss1">
      <div
        style="position: absolute; font-family: Arial, Helvetica, sans-serif;	bottom: 10px; right: 10px; font-size: 18px; color: #ffffff; opacity: 0.5;">
        25030706</div>
      <div class="spinner"></div>
      <div class="jss31 jss34 jss48" style="flex: 1 1 0%;">
        <div class="jss32">
          <div class="jss7 jss9 jss20 jss3">
            <div class="jss125">
              <div class="jss123">
                <img src="25030706/logo.png">
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--PRODUCT_VERSION:25030706END-->
      <div class="jss31 jss34" style="flex: 3 1 0%;">
        <div class="jss32">
          <div class="jss31 jss34 jss39 jss50 gameloader">
            <div class="jss32">
              <div class="gameloader-game-name">Escape Road</div>
            </div>
            <div class="jss32">
              <div class="jss32 gameloader-logo">
                <img id="game-logo" src="25030706/loading.png">
              </div>
            </div>
            <div class="jss32">
              <div>
                <div class="gameloader-progressbar">
                  <div class="gameloader-progressbar-progress" id="progress_fill" style="width: 0%;"></div>
                </div>
                <div class="gameloader-progress-info">Game Loading...</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Tinkle elements
    const loaderOverlay = document.getElementById("loader-overlay");
    const loaderBarFill = document.getElementById("loader-bar-fill");
    const loaderInfo = document.getElementById("loader-info");

    const introOverlay = document.getElementById("intro-overlay");
    const introCta = document.getElementById("intro-cta");

    introCta.addEventListener("click", () => {
      introOverlay.classList.add("fade-out");
      setTimeout(() => {
        introOverlay.style.display = "none";
      }, 700);
    });

    // Unity elements
    var container = document.getElementById("unity-container");
    var canvas = document.getElementById("unity-canvas");

    // Load Unity loader script
    var script = document.createElement("script");
    script.src = loaderUrl;

    script.onload = () => {
      container.style.display = "block";

      createUnityInstance(canvas, config, (progress) => {
        const pct = Math.round(progress * 100);
        loaderBarFill.style.width = pct + "%";

        if (pct < 5) loaderInfo.textContent = "Starting engine… " + pct + "%";
        else if (pct < 90) loaderInfo.textContent = "Loading game files… " + pct + "%";
        else if (pct < 100) loaderInfo.textContent = "Finalizing… " + pct + "%";
        else loaderInfo.textContent = "Almost done…";
      }).then((unityInstance) => {
        window.unityInstance = unityInstance;

        // Hide loader, show intro
        if (loaderOverlay) loaderOverlay.style.display = "none";
        if (introOverlay) introOverlay.style.display = "flex";

        setTimeout(() => window.focus(), 250);
      }).catch((message) => {
        alert(message);
        if (loaderInfo) loaderInfo.textContent = "Error loading game.";
      });
    };

    script.onerror = () => {
      if (loaderInfo) loaderInfo.textContent = "Failed to load Unity loader script.";
    };

    document.body.appendChild(script);
  </script>

  <script src="https://www.gstatic.com/firebasejs/10.9.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.9.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.9.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.9.0/firebase-analytics-compat.js"></script>

  <script type="module">
    const firebaseConfig = {
      apiKey: "AIzaSyASPz-JxitqlNTmfknPBTdCXzP1UAmIflU",
      authDomain: "escape-road-city-2-1games.firebaseapp.com",
      projectId: "escape-road-city-2-1games",
      storageBucket: "escape-road-city-2-1games.firebasestorage.app",
      messagingSenderId: "868829830791",
      appId: "1:868829830791:web:9f20035dcd816acbfda222",
      measurementId: "G-MWML2MHBVR"
    };

    if (firebaseConfig) {
      window.dataLayer = window.dataLayer || [];
      window.gtag = function () { window.dataLayer.push(arguments); }

      window.gtag("config", firebaseConfig.measurementId, {
        cookie_domain: window.location.hostname,
        cookie_flags: "SameSite=None;Secure",
      });
      firebase.initializeApp(firebaseConfig);
    }
  </script>

  <script>
    function firebaseSetUserProperties(props) { firebase.analytics().setUserProperties(props); }
    function firebaseLogEvent(event_name) { firebase.analytics().logEvent(event_name); }
    function firebaseLogEventParameter(event_name, event_param) { firebase.analytics().logEvent(event_name, event_param); }

    let time_counter_gm = 0;
    function gmRepeatEvery30Seconds() {
      setInterval(function () {
        if (config.eventLog) {
          firebaseLogEvent("time_countergm_" + time_counter_gm++);
        }
      }, 30000);
    }
    gmRepeatEvery30Seconds();
  </script>

  <script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015"
    integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ=="
    data-cf-beacon='{"version":"2024.11.0","token":"984732fcbd5a443085b5d566e303b742","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}'
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/whatareyoutryingtodo/disable-devtool.min.js" disable-devtool-auto=""></script>
</body>
</html>

